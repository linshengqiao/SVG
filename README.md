# SVG Editor

一个基于 C++ 和 Qt 实现的图形编辑器，采用 MVC 架构，支持图形绘制、渲染接口抽象、模块化结构设计等特性。该项目仍未完善，待优化中。

---

## 一、架构设计

### 1.1 总体思路

项目采用经典的 MVC（Model-View-Controller）架构设计：

- **Model**：图形数据结构与状态管理；
- **View**：画布展示与绘图；
- **Controller**：处理用户交互逻辑。

### 1.2 项目结构
/rec                             → 存放资源文件
/src
├── main.cpp                     → 程序主入口
├── /ui                          → 用户界面逻辑
│   ├── kmainwindow.*            → 主窗口
│   ├── /KToolbar                → 左侧工具栏模块
│   ├── /KCanvas                 → 中间画布模块、图形工厂、控制器
│   ├── /KParameterSetting       → 右侧参数设置模块
│   └── /KRender                 → 渲染器与图形渲染类
│       ├── kirender.*           → 渲染接口定义（IRender）
│       ├── /KRenderShapes       → 所有可渲染图形（KIRenderShape 子类）
│       └── /KShapes             → 图形数据结构（纯数据模型）

---

## 二、功能评估

### 2.1 已实现功能亮点

- ✅ **图形数据与绘制行为分离（IShape vs KIRenderShape）**：所有图形数据定义在 `IShape` 接口与 `KBaseShape` 中，而具体绘制逻辑由 `KIRenderShape` 及其子类负责。
- ✅ **抽象绘图接口 `KIRender`**：由 `QtRenderer` 具体实现，便于未来扩展。
- ✅ **统一渲染管线**：所有图形通过 `draw(IRender*)` 方法绘制。
- ✅ **高复用基类**：颜色、边框、透明度等通用属性集中管理。
- ✅ **控制器与视图解耦**：`KCanvasController` 管理交互逻辑，`KCanvasWidget` 负责显示。
- ✅ **图形创建工厂模式**：统一通过 `KShapeFactory` 创建图形，降低耦合。

### 2.2 当前存在的问题

- ❌ `KCanvasController` 职责过重（选择、绘制、缩放、状态管理）。
- ❌ 各图形类未统一使用 `KIRenderShape` 提供的接口，存在重复逻辑。
- ❌ 图形状态管理分散，重复字段较多，维护成本高。

### 2.3 未实现功能

- [ ] 图形编辑
- [ ] 属性面板
- [ ] 文件管理
- [ ] 配置管理

---

## 三、优化方向（未来计划）

- **控制器职责分离**：
  - 引入策略模式（`KIToolStrategy`）；
  - 按工具拆分为 `KSelectTool`、`KDrawShapeTool`、`KZoomTool` 等；
  - controller 委托执行，避免 switch-case 冗余判断；
  - 增强扩展性和可维护性。

- **接口结构优化**：
  - 所有图形统一使用基类的坐标与状态字段；
  - 绘图、拖动等逻辑统一依赖 `KIRenderShape` 接口。

-  **状态管理集中**：
  - 公共状态由 `KBaseShape` 管理，通过受保护接口对子类开放；
  - 降低重复逻辑、提升一致性。

---

## 四、项目总结

### 4.1 反思

项目开发过程中，由于前期未能准确评估时间与开发复杂度，导致部分功能未能完成，架构也在中途多次调整，影响效率。控制器逻辑集中、模块间耦合度高的问题在中后期逐渐暴露。

### 4.2 收获

这是我首次独立完成结构复杂的 GUI 应用，从项目文件结构规划、MVC 架构设计，到抽象接口设计、模块解耦，我得到了宝贵的实战经验。特别是在不断重构过程中，更深刻理解了设计模式和代码可维护性的价值。这次项目虽未尽善尽美，但为我后续工程项目打下了扎实基础。

---

##  License

本项目采用 MIT License 开源协议，欢迎学习与参考。

---

##  写在结尾

谢谢大家能看到这里！对于我这个C++入门小白来说，特别希望能得到你们的指点和建议！欢迎大家畅所欲言！
祝生活愉快！工作顺利！学业进步！
